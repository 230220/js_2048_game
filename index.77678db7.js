const t=new class{constructor(t){this.size=4,this.score=0,this.state=t||Array.from({length:this.size},()=>Array(this.size).fill(0)),this.status="idle"}moveLeft(){let t=!1;for(let e=0;e<this.size;e++){let s=this.#t([...this.state[e]]);JSON.stringify(this.state[e])!==JSON.stringify(s)&&(t=!0),this.state[e]=s}return t&&this.#e(),t}moveRight(){let t=!1;for(let e=0;e<this.size;e++){let s=[...this.state[e]].reverse(),i=this.#t(s).reverse();JSON.stringify(this.state[e])!==JSON.stringify(i)&&(t=!0),this.state[e]=i}return t&&this.#e(),t}moveUp(){let t=!1;for(let e=0;e<this.size;e++){let s=[];for(let t=0;t<this.size;t++)s.push(this.state[t][e]);let i=this.#t([...s]);JSON.stringify(s)!==JSON.stringify(i)&&(t=!0);for(let t=0;t<this.size;t++)this.state[t][e]=i[t]}return t&&this.#e(),t}moveDown(){let t=!1;for(let e=0;e<this.size;e++){let s=[];for(let t=0;t<this.size;t++)s.push(this.state[t][e]);let i=this.#t(s.reverse()).reverse();JSON.stringify(s)!==JSON.stringify(i)&&(t=!0);for(let t=0;t<this.size;t++)this.state[t][e]=i[t]}return t&&this.#e(),t}getScore(){return this.score}getState(){return this.state}getStatus(){return this.status}start(){this.score=0,this.state=Array.from({length:this.size},()=>Array(this.size).fill(0)),this.#s(),this.#s(),this.status="playing"}restart(){this.start()}#t(t){let e=t.filter(t=>0!==t);for(let t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,this.score+=e[t]);for(e=e.filter(t=>0!==t);e.length<this.size;)e.push(0);return e}#s(){let t=[];for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++)0===this.state[e][s]&&t.push([e,s]);if(t.length>0){let[e,s]=t[Math.floor(Math.random()*t.length)];this.state[e][s]=.9>Math.random()?2:4}}#e(){if(this.#s(),this.state.some(t=>t.includes(2048))){this.status="win";return}this.state.some(t=>t.includes(0))||this.#i()||(this.status="lose")}#i(){for(let t=0;t<this.size;t++)for(let e=0;e<this.size-1;e++)if(this.state[t][e]===this.state[t][e+1])return!0;for(let t=0;t<this.size;t++)for(let e=0;e<this.size-1;e++)if(this.state[e][t]===this.state[e+1][t])return!0;return!1}},e=document.querySelector(".game-score"),s=document.querySelector(".message-container"),i=document.querySelector(".game-field").querySelectorAll("tr");function r(t){switch(t){case"start":s.textContent='Press "Start" to begin game. Good luck!',s.classList.remove("hidden");break;case"win":s.textContent="Winner! Congrats! You did it!",s.classList.remove("hidden");break;case"lose":s.textContent="You lose! Restart the game?",s.classList.remove("hidden");break;default:s.classList.add("hidden")}}function a(){let s=t.getState(),a=t.getScore(),o=t.getStatus();e.textContent=a;for(let t=0;t<s.length;t++)for(let e=0;e<s[t].length;e++){let r=s[t][e],a=i[t].cells[e];a.textContent=0===r?"":r,a.className="field-cell",r>0&&a.classList.add(`field-cell--${r}`),r>=2048&&a.classList.add("field-cell--2048")}"win"===o?r("win"):"lose"===o?r("lose"):r("hide")}document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".start"),s=document.querySelector(".restart");e.addEventListener("click",()=>{t.start(),a(),e.classList.add("hidden"),s.classList.remove("hidden")}),s.addEventListener("click",()=>{t.restart(),a()})}),document.addEventListener("keydown",e=>{let s=!1;switch(e.key){case"ArrowLeft":s=t.moveLeft();break;case"ArrowRight":s=t.moveRight();break;case"ArrowUp":s=t.moveUp();break;case"ArrowDown":s=t.moveDown()}s&&a()}),r("start");
//# sourceMappingURL=index.77678db7.js.map
