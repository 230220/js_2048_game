!function(){function t(t,e,r){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return r}function e(t,e){!function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=Array(e);r<e;r++)i[r]=t[r];return i}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=new WeakSet,a=new WeakSet,o=new WeakSet,l=new WeakSet;function u(t){for(var e=t.filter(function(t){return 0!==t}),r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,e[r+1]=0,this.score+=e[r]);for(e=e.filter(function(t){return 0!==t});e.length<this.size;)e.push(0);return e}function c(){for(var t=[],e=0;e<this.size;e++)for(var r=0;r<this.size;r++)0===this.state[e][r]&&t.push([e,r]);if(t.length>0){var n,s=function(t){if(Array.isArray(t))return t}(n=t[Math.floor(Math.random()*t.length)])||function(t,e){var r,i,n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s=[],a=!0,o=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(s.push(r.value),2!==s.length);a=!0);}catch(t){o=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}}(n,2)||i(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=s[0],o=s[1];this.state[a][o]=.9>Math.random()?2:4}}function h(){if(t(this,a,c).call(this),this.state.some(function(t){return t.includes(2048)})){this.status="win";return}this.state.some(function(t){return t.includes(0)})||t(this,l,f).call(this)||(this.status="lose")}function f(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size-1;e++)if(this.state[t][e]===this.state[t][e+1])return!0;for(var r=0;r<this.size;r++)for(var i=0;i<this.size-1;i++)if(this.state[i][r]===this.state[i+1][r])return!0;return!1}var v=new(function(){var r;function i(t){var r=this;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e(this,s),e(this,a),e(this,o),e(this,l),this.size=4,this.score=0,this.state=t||Array.from({length:this.size},function(){return Array(r.size).fill(0)}),this.status="idle"}return r=[{key:"moveLeft",value:function(){for(var e=!1,r=0;r<this.size;r++){var i=t(this,s,u).call(this,n(this.state[r]));JSON.stringify(this.state[r])!==JSON.stringify(i)&&(e=!0),this.state[r]=i}return e&&t(this,o,h).call(this),e}},{key:"moveRight",value:function(){for(var e=!1,r=0;r<this.size;r++){var i=n(this.state[r]).reverse(),a=t(this,s,u).call(this,i).reverse();JSON.stringify(this.state[r])!==JSON.stringify(a)&&(e=!0),this.state[r]=a}return e&&t(this,o,h).call(this),e}},{key:"moveUp",value:function(){for(var e=!1,r=0;r<this.size;r++){for(var i=[],a=0;a<this.size;a++)i.push(this.state[a][r]);var l=t(this,s,u).call(this,n(i));JSON.stringify(i)!==JSON.stringify(l)&&(e=!0);for(var c=0;c<this.size;c++)this.state[c][r]=l[c]}return e&&t(this,o,h).call(this),e}},{key:"moveDown",value:function(){for(var e=!1,r=0;r<this.size;r++){for(var i=[],n=0;n<this.size;n++)i.push(this.state[n][r]);var a=t(this,s,u).call(this,i.reverse()).reverse();JSON.stringify(i)!==JSON.stringify(a)&&(e=!0);for(var l=0;l<this.size;l++)this.state[l][r]=a[l]}return e&&t(this,o,h).call(this),e}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.state}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){var e=this;this.score=0,this.state=Array.from({length:this.size},function(){return Array(e.size).fill(0)}),t(this,a,c).call(this),t(this,a,c).call(this),this.status="playing"}},{key:"restart",value:function(){this.start()}}],function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(i.prototype,r),i}()),d=document.querySelector(".game-score"),y=document.querySelector(".message-container"),m=document.querySelector(".game-field").querySelectorAll("tr");function g(t){switch(t){case"start":y.textContent='Press "Start" to begin game. Good luck!',y.classList.remove("hidden");break;case"win":y.textContent="Winner! Congrats! You did it!",y.classList.remove("hidden");break;case"lose":y.textContent="You lose! Restart the game?",y.classList.remove("hidden");break;default:y.classList.add("hidden")}}function S(){var t=v.getState(),e=v.getScore(),r=v.getStatus();d.textContent=e;for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var s=t[i][n],a=m[i].cells[n];a.textContent=0===s?"":s,a.className="field-cell",s>0&&a.classList.add("field-cell--".concat(s)),s>=2048&&a.classList.add("field-cell--2048")}"win"===r?g("win"):"lose"===r?g("lose"):g("hide")}document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".start"),e=document.querySelector(".restart");t.addEventListener("click",function(){v.start(),S(),t.classList.add("hidden"),e.classList.remove("hidden")}),e.addEventListener("click",function(){v.restart(),S()})}),document.addEventListener("keydown",function(t){var e=!1;switch(t.key){case"ArrowLeft":e=v.moveLeft();break;case"ArrowRight":e=v.moveRight();break;case"ArrowUp":e=v.moveUp();break;case"ArrowDown":e=v.moveDown()}e&&S()}),g("start")}();
//# sourceMappingURL=index.2747698d.js.map
